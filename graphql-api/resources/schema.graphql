### Enums

enum Usage {
    YES
    NO
    DONT_CARE
}

enum DefaultUsage {
    YES
    NO
}

### User

type Organization {
    id:             ID!
    name:           String!
}

type User {
    id:             ID!
    fullName:       String!
    email:          String
    organization:   Organization!
}

### Dictionary

type Phrase {
    id:             ID!
    text:           String!
}

type Synonyms {
    rootPhrase:     Phrase!
    phrases:        [ Phrase! ]
}

type ReaderFlag {
    id:             ID!
    name:           String!
}

type ReaderFlagUsage {
    id:             ID!
    flag:           ReaderFlag!
    usage:          Usage!
}

type PhraseUsageModel {
    id:             ID!
    phrase:         String!
    defaultUsage:   DefaultUsage!
    readerUsage:    [ ReaderFlagUsage! ]!
}

type DictionaryItem {
    id:             ID!
    name:           String!
    usageModels:    [ PhraseUsageModel! ]!
}

### Lexicon

type LexiconItem {
	id:				ID!
	createdAt:	    String
	key:			String!
	synonyms:	    [ String! ]!
	updatedAt:	    String
}

type Lexicon {
	items:			[ LexiconItem! ]!
	limit:			Int!
	offset:			Int!
	totalCount:	    Int!
}

### Queries

type Query {

    me:                         User!

    dictionary:              [ DictionaryItem! ]!

    dictionaryItem(
        id:         ID!
    ):  DictionaryItem

    phrases( query: String ):   [ Phrase! ]!

    readerFlags:                [ ReaderFlag! ]!

    synonyms( phraseId: ID! ):  Synonyms!

	searchLexicon(
		query: 		String
		limit:		Int
		offset:		Int
	): 	Lexicon!
}

type Mutation {

    createPhraseUsageModel(
        dictionaryItemId: ID!
        phrase:           String!
        defaultUsage:     DefaultUsage
    ):  DictionaryItem!

    updatePhraseUsageModelDefault(
        id:           ID!
        defaultUsage: DefaultUsage!
    ):  PhraseUsageModel!

    updateReaderFlagUsage(
        id:           ID!
        usage:        Usage!
    ):  ReaderFlagUsage!
}

schema {
    query:    Query
    mutation: Mutation
}
