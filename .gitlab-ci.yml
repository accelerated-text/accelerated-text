stages:
  - lint
  - test

variables:
  GIT_DEPTH: 3

cache:
  key: one-key-to-rule-them-all
  paths:
    - ./api/.m2/repository
    - ./api/.gitlibs

# test_front_end:
#   stage: test
#   image: node:11-slim
#   retry: 2
#   when: manual
#   cache:
#     key: front-end-cache
#     paths:
#       - ./front-end/node_modules/
#   before_script:
#     - apt-get update -qq && apt-get install -y -qq build-essential chromium libatk-bridge2.0-0 libgtk-3-0 rsync
#   script:
#     - make test
#   tags:
#     - front-end

job_npm_audit:
  image: node:11-slim
  only:
    - schedules
  cache:
    key: front-end-cache
  script:
    - make npm-audit
  tags:
    - front-end
